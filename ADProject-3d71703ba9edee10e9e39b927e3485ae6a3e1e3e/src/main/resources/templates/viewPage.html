<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="${recipe.name}"></title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
    <h1 th:text="${recipe.name}"></h1>

    <div>
		<img th:src="@{${recipe.image}}" alt="Recipe Image" class="recipe-image">
        <p><strong>Description:</strong> <span th:text="${recipe.description}"></span></p>
        <p><strong>Rating:</strong> <span th:text="${recipe.rating}"></span></p>
        
        
        <label for="ingredientsInput">Ingredients:</label>
        <div id="ingredientsContainer">
            <div th:each="ingredient : ${recipe.ingredients}">
                <p th:text="${ingredient}"></p>
            </div>
        </div>
        
        
        <label for="stepsInput">steps:</label>
        <div id="stepsContainer">
            <div th:each="step : ${recipe.steps}">
                <p th:text="${step}"></p>
            </div>
        </div>
        
        
        
        
    </div>

    <a th:href="@{/recipe/edit/{id}(id=${recipe.id})}" class="btn btn-primary">Edit</a>
    
    <a href="#" th:attr="onclick='deleteRecipe(' + ${recipe.id} + ')'" >Delete</a>
    
    <a th:href="@{/report/reportRecipe/{id}(id=${recipe.id})}" class="btn btn-primary">Report</a>
    
    
    
    <script>
	    function deleteRecipe(recipeId) {
	        var confirmDelete = confirm("Are you sure you want to delete this recipe?");
	        if (confirmDelete) {
	            $.ajax({
                type: "DELETE",
                url: "/recipe/delete/" + recipeId,
                success: function (data) {
                    window.location.replace("/recipe/list");
                },
                error: function (error) {
                    console.error("Error deleting recipe: " + error.responseText);
                }
            });

	        }
	    }
	</script>

</body>
</html>

