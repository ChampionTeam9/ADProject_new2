<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

	<head>
		<meta charset="UTF-8">
		<title>Set Preference</title>
		<link href="/style.css" rel="stylesheet" />
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
		<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
		<style>
			button {
				border-radius: 4px;
			}
		</style>
	</head>
	
	<body>
		<div class="custom-container">
			<div th:replace="fragments/navbar"></div>
		</div>
		<div class="container" style="width: 60%;">
			<h2>Set Preferences</h2>
			<br />
			<p>Select what kind of recipes you are interested in</p>
			<form id="preferenceForm" action="/user/setPreference" method="post">
				<table>
					<tr th:each="tag : ${tags}">
						<td>
							<input type="checkbox" th:id="${tag}" th:value="${tag}" name="tags" />
							<label th:for="${tag}" th:text="${tag}"></label>
						</td>
					</tr>
				</table>
				<br />
				<button type="submit" value="Refresh" onclick="submitForm('refresh')">Refresh Tags</button>
				<button type="submit" value="Submit" onclick="submitForm('submit')">Submit</button>
				<button type="submit" value="Skip" onclick="submitForm('skip')">Skip</button>
			</form>
		</div>
		<script>
			function submitForm(actionType) {
				var form = document.getElementById('preferenceForm');
				if (actionType === 'submit' | actionType === 'skip') {
					form.action = '/user/setPreference';
				} else if (actionType === 'refresh') {
					form.action = '/user/refresh';
				}
				form.submit();
			}
	</script>
	</body>
</html>